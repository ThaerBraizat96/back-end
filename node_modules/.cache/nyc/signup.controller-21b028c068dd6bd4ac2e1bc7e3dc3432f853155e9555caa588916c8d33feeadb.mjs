'use strict';function cov_1twqgwvv4e(){var path="/home/thaerbraizat/back-end/controllers/signup.controller.mjs";var hash="f0a88d67bd7183db3e358e4df1d274eecb16f7c8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/thaerbraizat/back-end/controllers/signup.controller.mjs",statementMap:{"0":{start:{line:6,column:15},end:{line:6,column:50}},"1":{start:{line:8,column:22},end:{line:22,column:1}},"2":{start:{line:9,column:4},end:{line:21,column:5}},"3":{start:{line:10,column:25},end:{line:10,column:65}},"4":{start:{line:11,column:23},end:{line:14,column:10}},"5":{start:{line:15,column:24},end:{line:15,column:102}},"6":{start:{line:17,column:8},end:{line:17,column:51}},"7":{start:{line:18,column:8},end:{line:18,column:25}},"8":{start:{line:20,column:8},end:{line:20,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:22},end:{line:8,column:23}},loc:{start:{line:8,column:48},end:{line:22,column:1}},line:8}},branchMap:{"0":{loc:{start:{line:6,column:15},end:{line:6,column:50}},type:"binary-expr",locations:[{start:{line:6,column:15},end:{line:6,column:33}},{start:{line:6,column:37},end:{line:6,column:50}}],line:6}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f0a88d67bd7183db3e358e4df1d274eecb16f7c8"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1twqgwvv4e=function(){return actualCoverage;};}return actualCoverage;}cov_1twqgwvv4e();import bcrypt from'bcrypt';import{userModel}from'../models/index.mjs';import jwt from"jsonwebtoken";const SECRET=(cov_1twqgwvv4e().s[0]++,(cov_1twqgwvv4e().b[0][0]++,process.env.SECRET)||(cov_1twqgwvv4e().b[0][1]++,"mysecretkey"));cov_1twqgwvv4e().s[1]++;export const signup=async(req,res,next)=>{cov_1twqgwvv4e().f[0]++;cov_1twqgwvv4e().s[2]++;try{const password=(cov_1twqgwvv4e().s[3]++,await bcrypt.hash(req.body.password,10));const record=(cov_1twqgwvv4e().s[4]++,await userModel.create({username:req.body.username,password:password}));const tokenTest=(cov_1twqgwvv4e().s[5]++,jwt.sign({username:req.body.username,userId:record.dataValues.id},SECRET));cov_1twqgwvv4e().s[6]++;record.dataValues["tokenTest"]=tokenTest;cov_1twqgwvv4e().s[7]++;res.json(record);}catch(e){cov_1twqgwvv4e().s[8]++;next("invalid signup");}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC5jb250cm9sbGVyLm1qcyJdLCJuYW1lcyI6WyJiY3J5cHQiLCJ1c2VyTW9kZWwiLCJqd3QiLCJTRUNSRVQiLCJwcm9jZXNzIiwiZW52Iiwic2lnbnVwIiwicmVxIiwicmVzIiwibmV4dCIsInBhc3N3b3JkIiwiaGFzaCIsImJvZHkiLCJyZWNvcmQiLCJjcmVhdGUiLCJ1c2VybmFtZSIsInRva2VuVGVzdCIsInNpZ24iLCJ1c2VySWQiLCJkYXRhVmFsdWVzIiwiaWQiLCJqc29uIiwiZSJdLCJtYXBwaW5ncyI6IkFBQUEsYSw4K0NBZVk7MkZBZFosTUFBT0EsQ0FBQUEsTUFBUCxLQUFtQixRQUFuQixDQUNBLE9BQVFDLFNBQVIsS0FBd0IscUJBQXhCLENBQ0EsTUFBT0MsQ0FBQUEsR0FBUCxLQUFnQixjQUFoQixDQUVBLEtBQU1DLENBQUFBLE1BQU0sMEJBQUcsNEJBQUFDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixNQUFaLCtCQUFzQixhQUF0QixDQUFILENBQVosQyx3QkFFQSxNQUFPLE1BQU1HLENBQUFBLE1BQU0sQ0FBRyxNQUFPQyxHQUFQLENBQVlDLEdBQVosQ0FBaUJDLElBQWpCLEdBQTBCLGlEQUM1QyxHQUFJLENBQ0EsS0FBTUMsQ0FBQUEsUUFBUSwwQkFBRyxLQUFNVixDQUFBQSxNQUFNLENBQUNXLElBQVAsQ0FBWUosR0FBRyxDQUFDSyxJQUFKLENBQVNGLFFBQXJCLENBQStCLEVBQS9CLENBQVQsQ0FBZCxDQUNBLEtBQU1HLENBQUFBLE1BQU0sMEJBQUcsS0FBTVosQ0FBQUEsU0FBUyxDQUFDYSxNQUFWLENBQWlCLENBQ2xDQyxRQUFRLENBQUVSLEdBQUcsQ0FBQ0ssSUFBSixDQUFTRyxRQURlLENBRWxDTCxRQUFRLENBQUVBLFFBRndCLENBQWpCLENBQVQsQ0FBWixDQUlBLEtBQU1NLENBQUFBLFNBQVMsMEJBQUNkLEdBQUcsQ0FBQ2UsSUFBSixDQUFTLENBQUVGLFFBQVEsQ0FBRVIsR0FBRyxDQUFDSyxJQUFKLENBQVNHLFFBQXJCLENBQWdDRyxNQUFNLENBQUNMLE1BQU0sQ0FBQ00sVUFBUCxDQUFrQkMsRUFBekQsQ0FBVCxDQUF1RWpCLE1BQXZFLENBQUQsQ0FBZixDQU5BLHdCQVFBVSxNQUFNLENBQUNNLFVBQVAsQ0FBa0IsV0FBbEIsRUFBaUNILFNBQWpDLENBUkEsd0JBU0FSLEdBQUcsQ0FBQ2EsSUFBSixDQUFTUixNQUFULEVBQ0gsQ0FBQyxNQUFPUyxDQUFQLENBQVUseUJBQ1JiLElBQUksQ0FBQyxnQkFBRCxDQUFKLENBQ0gsQ0FDSixDQWRNIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IHt1c2VyTW9kZWx9IGZyb20gJy4uL21vZGVscy9pbmRleC5tanMnO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmNvbnN0IFNFQ1JFVCA9IHByb2Nlc3MuZW52LlNFQ1JFVCB8fCBcIm15c2VjcmV0a2V5XCI7XG5cbmV4cG9ydCBjb25zdCBzaWdudXAgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHJlcS5ib2R5LnBhc3N3b3JkLCAxMCk7XG4gICAgICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IHVzZXJNb2RlbC5jcmVhdGUoe1xuICAgICAgICAgICAgdXNlcm5hbWU6IHJlcS5ib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdG9rZW5UZXN0PWp3dC5zaWduKHsgdXNlcm5hbWU6IHJlcS5ib2R5LnVzZXJuYW1lICwgdXNlcklkOnJlY29yZC5kYXRhVmFsdWVzLmlkfSwgU0VDUkVUKTtcblxuICAgICAgICByZWNvcmQuZGF0YVZhbHVlc1tcInRva2VuVGVzdFwiXSA9IHRva2VuVGVzdDtcbiAgICAgICAgcmVzLmpzb24ocmVjb3JkKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIG5leHQoXCJpbnZhbGlkIHNpZ251cFwiKVxuICAgIH1cbn1cblxuIl19