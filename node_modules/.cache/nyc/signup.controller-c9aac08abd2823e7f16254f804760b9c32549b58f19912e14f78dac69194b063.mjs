'use strict';function cov_1twqgwvv4e(){var path="/home/thaerbraizat/back-end/controllers/signup.controller.mjs";var hash="6ed173e44210665aed4e43275d4e3001b0a529be";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/thaerbraizat/back-end/controllers/signup.controller.mjs",statementMap:{"0":{start:{line:6,column:15},end:{line:6,column:50}},"1":{start:{line:8,column:22},end:{line:25,column:1}},"2":{start:{line:9,column:4},end:{line:24,column:5}},"3":{start:{line:10,column:25},end:{line:10,column:65}},"4":{start:{line:11,column:8},end:{line:11,column:67}},"5":{start:{line:12,column:23},end:{line:15,column:10}},"6":{start:{line:16,column:24},end:{line:16,column:102}},"7":{start:{line:20,column:8},end:{line:20,column:51}},"8":{start:{line:21,column:8},end:{line:21,column:25}},"9":{start:{line:23,column:8},end:{line:23,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:22},end:{line:8,column:23}},loc:{start:{line:8,column:48},end:{line:25,column:1}},line:8}},branchMap:{"0":{loc:{start:{line:6,column:15},end:{line:6,column:50}},type:"binary-expr",locations:[{start:{line:6,column:15},end:{line:6,column:33}},{start:{line:6,column:37},end:{line:6,column:50}}],line:6}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ed173e44210665aed4e43275d4e3001b0a529be"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1twqgwvv4e=function(){return actualCoverage;};}return actualCoverage;}cov_1twqgwvv4e();import bcrypt from'bcrypt';import{userModel}from'../models/index.mjs';import jwt from"jsonwebtoken";const SECRET=(cov_1twqgwvv4e().s[0]++,(cov_1twqgwvv4e().b[0][0]++,process.env.SECRET)||(cov_1twqgwvv4e().b[0][1]++,"mysecretkey"));cov_1twqgwvv4e().s[1]++;export const signup=async(req,res,next)=>{cov_1twqgwvv4e().f[0]++;cov_1twqgwvv4e().s[2]++;try{const password=(cov_1twqgwvv4e().s[3]++,await bcrypt.hash(req.body.password,10));cov_1twqgwvv4e().s[4]++;console.log("req.body.password teeeeeeeeeeeest:",req.body);const record=(cov_1twqgwvv4e().s[5]++,await userModel.create({username:req.body.username,password:password}));const tokenTest=(cov_1twqgwvv4e().s[6]++,jwt.sign({username:req.body.username,userId:record.dataValues.id},SECRET));// console.log("tesssst token",tokenTest);
// console.log("recordrecordrecordrecord",record);
cov_1twqgwvv4e().s[7]++;record.dataValues["tokenTest"]=tokenTest;cov_1twqgwvv4e().s[8]++;res.json(record);}catch(e){cov_1twqgwvv4e().s[9]++;next("invalid signup");}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC5jb250cm9sbGVyLm1qcyJdLCJuYW1lcyI6WyJiY3J5cHQiLCJ1c2VyTW9kZWwiLCJqd3QiLCJTRUNSRVQiLCJwcm9jZXNzIiwiZW52Iiwic2lnbnVwIiwicmVxIiwicmVzIiwibmV4dCIsInBhc3N3b3JkIiwiaGFzaCIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwicmVjb3JkIiwiY3JlYXRlIiwidXNlcm5hbWUiLCJ0b2tlblRlc3QiLCJzaWduIiwidXNlcklkIiwiZGF0YVZhbHVlcyIsImlkIiwianNvbiIsImUiXSwibWFwcGluZ3MiOiJBQUFBLGEsMmlEQWVZOzJGQWRaLE1BQU9BLENBQUFBLE1BQVAsS0FBbUIsUUFBbkIsQ0FDQSxPQUFRQyxTQUFSLEtBQXdCLHFCQUF4QixDQUNBLE1BQU9DLENBQUFBLEdBQVAsS0FBZ0IsY0FBaEIsQ0FFQSxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHLDRCQUFBQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsTUFBWiwrQkFBc0IsYUFBdEIsQ0FBSCxDQUFaLEMsd0JBRUEsTUFBTyxNQUFNRyxDQUFBQSxNQUFNLENBQUcsTUFBT0MsR0FBUCxDQUFZQyxHQUFaLENBQWlCQyxJQUFqQixHQUEwQixpREFDNUMsR0FBSSxDQUNBLEtBQU1DLENBQUFBLFFBQVEsMEJBQUcsS0FBTVYsQ0FBQUEsTUFBTSxDQUFDVyxJQUFQLENBQVlKLEdBQUcsQ0FBQ0ssSUFBSixDQUFTRixRQUFyQixDQUErQixFQUEvQixDQUFULENBQWQsQ0FEQSx3QkFFQUcsT0FBTyxDQUFDQyxHQUFSLENBQVksb0NBQVosQ0FBa0RQLEdBQUcsQ0FBQ0ssSUFBdEQsRUFDQSxLQUFNRyxDQUFBQSxNQUFNLDBCQUFHLEtBQU1kLENBQUFBLFNBQVMsQ0FBQ2UsTUFBVixDQUFpQixDQUNsQ0MsUUFBUSxDQUFFVixHQUFHLENBQUNLLElBQUosQ0FBU0ssUUFEZSxDQUVsQ1AsUUFBUSxDQUFFQSxRQUZ3QixDQUFqQixDQUFULENBQVosQ0FJQSxLQUFNUSxDQUFBQSxTQUFTLDBCQUFDaEIsR0FBRyxDQUFDaUIsSUFBSixDQUFTLENBQUVGLFFBQVEsQ0FBRVYsR0FBRyxDQUFDSyxJQUFKLENBQVNLLFFBQXJCLENBQWdDRyxNQUFNLENBQUNMLE1BQU0sQ0FBQ00sVUFBUCxDQUFrQkMsRUFBekQsQ0FBVCxDQUF1RW5CLE1BQXZFLENBQUQsQ0FBZixDQUNBO0FBQ0E7QUFUQSx3QkFXQVksTUFBTSxDQUFDTSxVQUFQLENBQWtCLFdBQWxCLEVBQWlDSCxTQUFqQyxDQVhBLHdCQVlBVixHQUFHLENBQUNlLElBQUosQ0FBU1IsTUFBVCxFQUNILENBQUMsTUFBT1MsQ0FBUCxDQUFVLHlCQUNSZixJQUFJLENBQUMsZ0JBQUQsQ0FBSixDQUNILENBQ0osQ0FqQk0iLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQge3VzZXJNb2RlbH0gZnJvbSAnLi4vbW9kZWxzL2luZGV4Lm1qcyc7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcblxuY29uc3QgU0VDUkVUID0gcHJvY2Vzcy5lbnYuU0VDUkVUIHx8IFwibXlzZWNyZXRrZXlcIjtcblxuZXhwb3J0IGNvbnN0IHNpZ251cCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocmVxLmJvZHkucGFzc3dvcmQsIDEwKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXEuYm9keS5wYXNzd29yZCB0ZWVlZWVlZWVlZWVlc3Q6XCIsIHJlcS5ib2R5KVxuICAgICAgICBjb25zdCByZWNvcmQgPSBhd2FpdCB1c2VyTW9kZWwuY3JlYXRlKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiByZXEuYm9keS51c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRva2VuVGVzdD1qd3Quc2lnbih7IHVzZXJuYW1lOiByZXEuYm9keS51c2VybmFtZSAsIHVzZXJJZDpyZWNvcmQuZGF0YVZhbHVlcy5pZH0sIFNFQ1JFVCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGVzc3NzdCB0b2tlblwiLHRva2VuVGVzdCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVjb3JkcmVjb3JkcmVjb3JkcmVjb3JkXCIscmVjb3JkKTtcblxuICAgICAgICByZWNvcmQuZGF0YVZhbHVlc1tcInRva2VuVGVzdFwiXSA9IHRva2VuVGVzdDtcbiAgICAgICAgcmVzLmpzb24ocmVjb3JkKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIG5leHQoXCJpbnZhbGlkIHNpZ251cFwiKVxuICAgIH1cbn1cblxuIl19