'use strict';function cov_5bubep8f5(){var path="/home/thaerbraizat/back-end/middleware/basicAuth.mjs";var hash="618a3a58d2fe3d621f923205378404e97d049e76";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/thaerbraizat/back-end/middleware/basicAuth.mjs",statementMap:{"0":{start:{line:5,column:25},end:{line:20,column:1}},"1":{start:{line:5,column:41},end:{line:20,column:1}},"2":{start:{line:7,column:4},end:{line:10,column:5}},"3":{start:{line:8,column:8},end:{line:8,column:38}},"4":{start:{line:9,column:8},end:{line:9,column:15}},"5":{start:{line:11,column:29},end:{line:11,column:65}},"6":{start:{line:12,column:20},end:{line:12,column:42}},"7":{start:{line:13,column:20},end:{line:13,column:42}},"8":{start:{line:14,column:33},end:{line:14,column:51}},"9":{start:{line:16,column:4},end:{line:19,column:42}},"10":{start:{line:17,column:8},end:{line:17,column:29}},"11":{start:{line:18,column:8},end:{line:18,column:15}},"12":{start:{line:19,column:19},end:{line:19,column:40}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:25},end:{line:5,column:26}},loc:{start:{line:5,column:41},end:{line:20,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:41},end:{line:5,column:42}},loc:{start:{line:5,column:61},end:{line:20,column:1}},line:5},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:58},end:{line:16,column:59}},loc:{start:{line:16,column:70},end:{line:19,column:5}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:13},end:{line:19,column:14}},loc:{start:{line:19,column:19},end:{line:19,column:40}},line:19}},branchMap:{"0":{loc:{start:{line:7,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:10,column:5}},{start:{line:7,column:4},end:{line:10,column:5}}],line:7}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"618a3a58d2fe3d621f923205378404e97d049e76"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_5bubep8f5=function(){return actualCoverage;};}return actualCoverage;}cov_5bubep8f5();import base64 from'base-64';cov_5bubep8f5().s[0]++;export const basicAuth=UserSchema=>{cov_5bubep8f5().f[0]++;cov_5bubep8f5().s[1]++;return(req,res,next)=>{cov_5bubep8f5().f[1]++;cov_5bubep8f5().s[2]++;// console.log("============test",req.headers['authorization']);
if(!req.headers['authorization']){cov_5bubep8f5().b[0][0]++;cov_5bubep8f5().s[3]++;next('No Authorization info');cov_5bubep8f5().s[4]++;return;}else{cov_5bubep8f5().b[0][1]++;}const basicHeaderParts=(cov_5bubep8f5().s[5]++,req.headers.authorization.split(' '));const encoded=(cov_5bubep8f5().s[6]++,basicHeaderParts.pop());const decoded=(cov_5bubep8f5().s[7]++,base64.decode(encoded));const[username,password]=(cov_5bubep8f5().s[8]++,decoded.split(":"));cov_5bubep8f5().s[9]++;UserSchema.authenticateBasic(username,password).then(validUser=>{cov_5bubep8f5().f[2]++;cov_5bubep8f5().s[10]++;req.user=validUser;cov_5bubep8f5().s[11]++;next();}).catch(err=>{cov_5bubep8f5().f[3]++;cov_5bubep8f5().s[12]++;return next('invalid users');});};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2ljQXV0aC5tanMiXSwibmFtZXMiOlsiYmFzZTY0IiwiYmFzaWNBdXRoIiwiVXNlclNjaGVtYSIsInJlcSIsInJlcyIsIm5leHQiLCJoZWFkZXJzIiwiYmFzaWNIZWFkZXJQYXJ0cyIsImF1dGhvcml6YXRpb24iLCJzcGxpdCIsImVuY29kZWQiLCJwb3AiLCJkZWNvZGVkIiwiZGVjb2RlIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImF1dGhlbnRpY2F0ZUJhc2ljIiwidGhlbiIsInZhbGlkVXNlciIsInVzZXIiLCJjYXRjaCIsImVyciJdLCJtYXBwaW5ncyI6IkFBQUEsYSw4b0VBZVk7eUZBYlosTUFBT0EsQ0FBQUEsTUFBUCxLQUFtQixTQUFuQixDLHVCQUVBLE1BQU8sTUFBTUMsQ0FBQUEsU0FBUyxDQUFJQyxVQUFELEVBQWdCLHNEQUFDQyxHQUFELENBQU1DLEdBQU4sQ0FBV0MsSUFBWCxHQUFvQiwrQ0FDekQ7QUFDQSxHQUFJLENBQUNGLEdBQUcsQ0FBQ0csT0FBSixDQUFZLGVBQVosQ0FBTCxDQUFtQyxrREFDL0JELElBQUksQ0FBQyx1QkFBRCxDQUFKLENBRCtCLHVCQUUvQixPQUNILENBSEQsZ0NBSUEsS0FBTUUsQ0FBQUEsZ0JBQWdCLHlCQUFHSixHQUFHLENBQUNHLE9BQUosQ0FBWUUsYUFBWixDQUEwQkMsS0FBMUIsQ0FBZ0MsR0FBaEMsQ0FBSCxDQUF0QixDQUNBLEtBQU1DLENBQUFBLE9BQU8seUJBQUdILGdCQUFnQixDQUFDSSxHQUFqQixFQUFILENBQWIsQ0FDQSxLQUFNQyxDQUFBQSxPQUFPLHlCQUFHWixNQUFNLENBQUNhLE1BQVAsQ0FBY0gsT0FBZCxDQUFILENBQWIsQ0FDQSxLQUFNLENBQUNJLFFBQUQsQ0FBV0MsUUFBWCwwQkFBdUJILE9BQU8sQ0FBQ0gsS0FBUixDQUFjLEdBQWQsQ0FBdkIsQ0FBTixDQVR5RCx1QkFXekRQLFVBQVUsQ0FBQ2MsaUJBQVgsQ0FBNkJGLFFBQTdCLENBQXVDQyxRQUF2QyxFQUFpREUsSUFBakQsQ0FBc0RDLFNBQVMsRUFBRyxnREFDOURmLEdBQUcsQ0FBQ2dCLElBQUosQ0FBV0QsU0FBWCxDQUQ4RCx3QkFFOURiLElBQUksR0FDUCxDQUhELEVBR0dlLEtBSEgsQ0FHU0MsR0FBRyxFQUFHLHNEQUFBaEIsQ0FBQUEsSUFBSSxDQUFDLGVBQUQsQ0FBSixDQUFxQixDQUhwQyxFQUlILENBZndDLENBZXhDLENBZk0iLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmltcG9ydCBiYXNlNjQgZnJvbSAnYmFzZS02NCdcblxuZXhwb3J0IGNvbnN0IGJhc2ljQXV0aCA9IChVc2VyU2NoZW1hKSA9PiAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAvLyBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PXRlc3RcIixyZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddKTtcbiAgICBpZiAoIXJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ10pIHtcbiAgICAgICAgbmV4dCgnTm8gQXV0aG9yaXphdGlvbiBpbmZvJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYmFzaWNIZWFkZXJQYXJ0cyA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKTsgXG4gICAgY29uc3QgZW5jb2RlZCA9IGJhc2ljSGVhZGVyUGFydHMucG9wKCk7XG4gICAgY29uc3QgZGVjb2RlZCA9IGJhc2U2NC5kZWNvZGUoZW5jb2RlZCk7IFxuICAgIGNvbnN0IFt1c2VybmFtZSwgcGFzc3dvcmRdID0gZGVjb2RlZC5zcGxpdChcIjpcIik7IFxuICAgXG4gICAgVXNlclNjaGVtYS5hdXRoZW50aWNhdGVCYXNpYyh1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4odmFsaWRVc2VyPT4ge1xuICAgICAgICByZXEudXNlciA9IHZhbGlkVXNlcjtcbiAgICAgICAgbmV4dCgpO1xuICAgIH0pLmNhdGNoKGVycj0+IG5leHQoJ2ludmFsaWQgdXNlcnMnKSk7XG59Il19