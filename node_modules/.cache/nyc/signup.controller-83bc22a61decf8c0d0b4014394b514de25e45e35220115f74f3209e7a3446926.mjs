"use strict";function cov_1twqgwvv4e(){var path="/home/thaerbraizat/back-end/controllers/signup.controller.mjs";var hash="33a8661115bedc9e03849380a254dd6adedabcf1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/thaerbraizat/back-end/controllers/signup.controller.mjs",statementMap:{"0":{start:{line:6,column:15},end:{line:6,column:50}},"1":{start:{line:8,column:22},end:{line:26,column:1}},"2":{start:{line:9,column:2},end:{line:25,column:3}},"3":{start:{line:10,column:21},end:{line:10,column:61}},"4":{start:{line:11,column:19},end:{line:14,column:6}},"5":{start:{line:15,column:22},end:{line:18,column:5}},"6":{start:{line:19,column:4},end:{line:19,column:47}},"7":{start:{line:20,column:4},end:{line:20,column:18}},"8":{start:{line:23,column:4},end:{line:23,column:38}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:22},end:{line:8,column:23}},loc:{start:{line:8,column:48},end:{line:26,column:1}},line:8}},branchMap:{"0":{loc:{start:{line:6,column:15},end:{line:6,column:50}},type:"binary-expr",locations:[{start:{line:6,column:15},end:{line:6,column:33}},{start:{line:6,column:37},end:{line:6,column:50}}],line:6}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"33a8661115bedc9e03849380a254dd6adedabcf1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1twqgwvv4e=function(){return actualCoverage;};}return actualCoverage;}cov_1twqgwvv4e();import bcrypt from"bcrypt";import{userModel}from"../models/index.mjs";import jwt from"jsonwebtoken";const SECRET=(cov_1twqgwvv4e().s[0]++,(cov_1twqgwvv4e().b[0][0]++,process.env.SECRET)||(cov_1twqgwvv4e().b[0][1]++,"mysecretkey"));cov_1twqgwvv4e().s[1]++;export const signup=async(req,res,next)=>{cov_1twqgwvv4e().f[0]++;cov_1twqgwvv4e().s[2]++;try{const password=(cov_1twqgwvv4e().s[3]++,await bcrypt.hash(req.body.password,10));const record=(cov_1twqgwvv4e().s[4]++,await userModel.create({username:req.body.username,password:password}));const tokenTest=(cov_1twqgwvv4e().s[5]++,jwt.sign({username:req.body.username,userId:record.dataValues.id},SECRET));cov_1twqgwvv4e().s[6]++;record.dataValues["tokenTest"]=tokenTest;cov_1twqgwvv4e().s[7]++;return record;// res.json(record);
}catch(e){cov_1twqgwvv4e().s[8]++;throw new Error("invalid signup");// next("invalid signup")
}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC5jb250cm9sbGVyLm1qcyJdLCJuYW1lcyI6WyJiY3J5cHQiLCJ1c2VyTW9kZWwiLCJqd3QiLCJTRUNSRVQiLCJwcm9jZXNzIiwiZW52Iiwic2lnbnVwIiwicmVxIiwicmVzIiwibmV4dCIsInBhc3N3b3JkIiwiaGFzaCIsImJvZHkiLCJyZWNvcmQiLCJjcmVhdGUiLCJ1c2VybmFtZSIsInRva2VuVGVzdCIsInNpZ24iLCJ1c2VySWQiLCJkYXRhVmFsdWVzIiwiaWQiLCJlIiwiRXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLGEsMitDQWVZOzJGQWRaLE1BQU9BLENBQUFBLE1BQVAsS0FBbUIsUUFBbkIsQ0FDQSxPQUFTQyxTQUFULEtBQTBCLHFCQUExQixDQUNBLE1BQU9DLENBQUFBLEdBQVAsS0FBZ0IsY0FBaEIsQ0FFQSxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHLDRCQUFBQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsTUFBWiwrQkFBc0IsYUFBdEIsQ0FBSCxDQUFaLEMsd0JBRUEsTUFBTyxNQUFNRyxDQUFBQSxNQUFNLENBQUcsTUFBT0MsR0FBUCxDQUFZQyxHQUFaLENBQWlCQyxJQUFqQixHQUEwQixpREFDOUMsR0FBSSxDQUNGLEtBQU1DLENBQUFBLFFBQVEsMEJBQUcsS0FBTVYsQ0FBQUEsTUFBTSxDQUFDVyxJQUFQLENBQVlKLEdBQUcsQ0FBQ0ssSUFBSixDQUFTRixRQUFyQixDQUErQixFQUEvQixDQUFULENBQWQsQ0FDQSxLQUFNRyxDQUFBQSxNQUFNLDBCQUFHLEtBQU1aLENBQUFBLFNBQVMsQ0FBQ2EsTUFBVixDQUFpQixDQUNwQ0MsUUFBUSxDQUFFUixHQUFHLENBQUNLLElBQUosQ0FBU0csUUFEaUIsQ0FFcENMLFFBQVEsQ0FBRUEsUUFGMEIsQ0FBakIsQ0FBVCxDQUFaLENBSUEsS0FBTU0sQ0FBQUEsU0FBUywwQkFBR2QsR0FBRyxDQUFDZSxJQUFKLENBQ2hCLENBQUVGLFFBQVEsQ0FBRVIsR0FBRyxDQUFDSyxJQUFKLENBQVNHLFFBQXJCLENBQStCRyxNQUFNLENBQUVMLE1BQU0sQ0FBQ00sVUFBUCxDQUFrQkMsRUFBekQsQ0FEZ0IsQ0FFaEJqQixNQUZnQixDQUFILENBQWYsQ0FORSx3QkFVRlUsTUFBTSxDQUFDTSxVQUFQLENBQWtCLFdBQWxCLEVBQWlDSCxTQUFqQyxDQVZFLHdCQVdGLE1BQU9ILENBQUFBLE1BQVAsQ0FDQTtBQUNELENBQUMsTUFBT1EsQ0FBUCxDQUFVLHlCQUNWLEtBQU0sSUFBSUMsQ0FBQUEsS0FBSixDQUFVLGdCQUFWLENBQU4sQ0FDQTtBQUNELENBQ0YsQ0FsQk0iLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xuaW1wb3J0IHsgdXNlck1vZGVsIH0gZnJvbSBcIi4uL21vZGVscy9pbmRleC5tanNcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuXG5jb25zdCBTRUNSRVQgPSBwcm9jZXNzLmVudi5TRUNSRVQgfHwgXCJteXNlY3JldGtleVwiO1xuXG5leHBvcnQgY29uc3Qgc2lnbnVwID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChyZXEuYm9keS5wYXNzd29yZCwgMTApO1xuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IHVzZXJNb2RlbC5jcmVhdGUoe1xuICAgICAgdXNlcm5hbWU6IHJlcS5ib2R5LnVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgIH0pO1xuICAgIGNvbnN0IHRva2VuVGVzdCA9IGp3dC5zaWduKFxuICAgICAgeyB1c2VybmFtZTogcmVxLmJvZHkudXNlcm5hbWUsIHVzZXJJZDogcmVjb3JkLmRhdGFWYWx1ZXMuaWQgfSxcbiAgICAgIFNFQ1JFVFxuICAgICk7XG4gICAgcmVjb3JkLmRhdGFWYWx1ZXNbXCJ0b2tlblRlc3RcIl0gPSB0b2tlblRlc3Q7XG4gICAgcmV0dXJuIHJlY29yZDtcbiAgICAvLyByZXMuanNvbihyZWNvcmQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBzaWdudXBcIik7XG4gICAgLy8gbmV4dChcImludmFsaWQgc2lnbnVwXCIpXG4gIH1cbn07XG4iXX0=